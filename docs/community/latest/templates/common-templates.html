<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>KubeVirt Latest | Working with Templates | Introduction</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

    <link href="../../latest/_stylesheets/asciibinder.css" rel="stylesheet" />

   <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
   <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
   <!--[if lt IE 9]>
     <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
     <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
   <![endif]-->

  <link href="../../latest/_images/favicon32x32.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="../../latest/_images/favicon.ico"><![endif]-->
  <meta content="AsciiBinder" name="application-name">
</head>
<body>
  <div class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="https://kubevirt.io/"><img alt="Kubevirt" height="64px" src="../../latest/_images/KubeVirt_icon.png"></a>
      </div>
    </div>
  </div>
  <div class="container">
    <p class="toggle-nav visible-xs pull-left">
      <button class="btn btn-default btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb">
      <li class="sitename">
        <a href="../../index.html">Documentation</a>
      </li>
      <li class="hidden-xs active">
        <a href="../welcome/index.html">KubeVirt Latest</a>
      </li>
      <li class="hidden-xs active">
        <a href="../templates/common-templates.html">Working with Templates</a>
      </li>
      
      <li class="hidden-xs active">
        Introduction
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-3 col-md-3 sidebar sidebar-offcanvas">
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>Welcome
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../welcome/index.html">Welcome</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>Release Notes
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../release-notes/changelog.html">Changelog</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Architecture
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../architecture/virtual-machine.html">Virtual Machines</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>Installation & Administration
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../administration/intro.html">Installation</a></li>
            <li><a class="" href="../administration/api-validation.html">Webhooks</a></li>
            <li><a class="" href="../administration/authorization.html">Authorization</a></li>
            <li><a class="" href="../administration/monitoring.html">Monitoring</a></li>
            <li><a class="" href="../administration/annotations_and_labels.html">Annotations and Labels</a></li>
            <li><a class="" href="../administration/unresponsive-nodes.html">Unresponsive node handling</a></li>
            <li><a class="" href="../administration/node-eviction.html">Node eviciton</a></li>
            <li><a class="" href="../administration/image-upload.html">Image upload</a></li>
            <li><a class="" href="../administration/live-migration.html">Live Migration</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-right"></span>Creating Virtual Machines
      </a>
      <ul id="topicGroup4" class="collapse  list-unstyled">
            <li><a class="" href="../creating-virtual-machines/intro.html">Introduction</a></li>
            <li><a class="" href="../creating-virtual-machines/virtualized-hardware-configuration.html">Devices</a></li>
            <li><a class="" href="../creating-virtual-machines/disks-and-volumes.html">Disks and Volumes</a></li>
            <li><a class="" href="../creating-virtual-machines/interfaces-and-networks.html">Interfaces and Networks</a></li>
            <li><a class="" href="../creating-virtual-machines/dedicated-cpu.html">Guaranteed CPU usage</a></li>
            <li><a class="" href="../creating-virtual-machines/startup-scripts.html">cloud-init</a></li>
            <li><a class="" href="../creating-virtual-machines/guest-operating-system-information.html">Associating Guest Informations</a></li>
            <li><a class="" href="../creating-virtual-machines/virtio-win.html">virtio drivers for Microsoft Windows</a></li>
            <li><a class="" href="../creating-virtual-machines/presets.html">Presets</a></li>
            <li><a class="" href="../creating-virtual-machines/probes.html">Probes</a></li>
            <li><a class="" href="../creating-virtual-machines/run-strategies.html">Run Strategies</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-right"></span>Using Virtual Machines
      </a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../using-virtual-machines/usage.html">Usage</a></li>
            <li><a class="" href="../using-virtual-machines/life-cycle.html">Starting and Stopping</a></li>
            <li><a class="" href="../using-virtual-machines/graphical-and-console-access.html">Console Access (Serial and Graphical)</a></li>
            <li><a class="" href="../using-virtual-machines/assigning-vms-to-nodes.html">Node placement</a></li>
            <li><a class="" href="../using-virtual-machines/dns.html">DNS Integration</a></li>
            <li><a class="" href="../using-virtual-machines/expose-service.html">Service Integration</a></li>
            <li><a class="" href="../using-virtual-machines/create-networkpolicy.html">Assigning Network Policies</a></li>
            <li><a class="" href="../using-virtual-machines/overcommit.html">Memory over-commit</a></li>
            <li><a class="" href="../using-virtual-machines/virtual-machine-replica-set.html">Virtual Machine Replica Set</a></li>
            <li><a class="" href="../using-virtual-machines/vmctl.html">vmctl</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup6">
        <span id="tgSpan6" class="fa fa-angle-down"></span>Working with Templates
      </a>
      <ul id="topicGroup6" class="collapse in list-unstyled">
            <li><a class=" active" href="../templates/common-templates.html">Introduction</a></li>
            <li><a class="" href="../templates/using-templates.html">Using templates</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#" data-toggle="collapse" data-target="#topicGroup7">
        <span id="tgSpan7" class="fa fa-angle-right"></span>Web Interface
      </a>
      <ul id="topicGroup7" class="collapse  list-unstyled">
            <li><a class="" href="../web-interface/web-interface.html">Web Interface</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>Virtual machine templates</h2>
        </div>
        <div class="sect1">
<h2 id="virtual-machine-templates"><a class="anchor" href="#virtual-machine-templates"></a>Virtual machine templates</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="what-is-a-virtual-machine-template"><a class="anchor" href="#what-is-a-virtual-machine-template"></a>What is a virtual machine template?</h3>
<div class="paragraph">
<p>The KubeVirt projects provides a set of
<a href="https://docs.okd.io/latest/dev_guide/templates.html">templates</a> to create
VMs to handle common usage scenarios. These templates provide a
combination of some key factors that could be further customized and
processed to have a Virtual Machine object. The key factors which define
a template are</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Workload Most Virtual Machine should be <em>generic</em> to have maximum
flexibility; the <em>highperformance</em> workload trades some of this
flexibility to provide better performances.</p>
</li>
<li>
<p>Guest Operating System (OS) This allow to ensure that the emulated
hardware is compatible with the guest OS. Furthermore, it allows to
maximize the stability of the VM, and allows performance optimizations.</p>
</li>
<li>
<p>Size (flavor) Defines the amount of resources (CPU, memory) to
allocate to the VM.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>More documentation is available in the
<a href="https://github.com/kubevirt/common-templates">common templates subproject</a></p>
</div>
</div>
<div class="sect2">
<h3 id="accessing-the-virtual-machine-templates"><a class="anchor" href="#accessing-the-virtual-machine-templates"></a>Accessing the virtual machine templates</h3>
<div class="paragraph">
<p>If you installed KubeVirt using a supported method you should find the
common templates preinstalled in the cluster. Should you want to upgrade
the templates, or install them from scratch, you can use one of the
<a href="https://github.com/kubevirt/common-templates/releases">supported releases</a></p>
</div>
<div class="paragraph">
<p>To install the templates:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ export VERSION=&quot;v0.3.1&quot;
$ oc create -f https://github.com/kubevirt/common-templates/releases/download/$VERSION/common-templates-$VERSION.yaml</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="editable-fields"><a class="anchor" href="#editable-fields"></a>Editable fields</h3>
<div class="paragraph">
<p>You can edit the fields of the templates which define the amount of
resources which the VMs will receive.</p>
</div>
<div class="paragraph">
<p>Each template can list a different set of fields that are to be
considered editable. The fields are used as hints for the user
interface, and also for other components in the cluster.</p>
</div>
<div class="paragraph">
<p>The editable fields are taken from annotations in the template. Here is
a snippet presenting a couple of most commonly found editable fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">metadata</span>:
  <span style="color:#606">annotations</span>:
    <span style="color:#606">template.kubevirt.io/editable</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">|</span><span style="color:#D20">
      /objects[0].spec.template.spec.domain.cpu.sockets
      /objects[0].spec.template.spec.domain.cpu.cores
      /objects[0].spec.template.spec.domain.cpu.threads
      /objects[0].spec.template.spec.domain.resources.requests.memory</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Each entry in the editable field list must be a
<a href="https://kubernetes.io/docs/reference/kubectl/jsonpath/">jsonpath</a>. The
jsonpath root is the objects: element of the template. The actually
editable field is the last entry (the ``leaf'') of the path. For
example, the following minimal snippet highlights the fields which you
can edit:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">objects</span>:
  <span style="color:#606">spec</span>:
    <span style="color:#606">template</span>:
      <span style="color:#606">spec</span>:
        <span style="color:#606">domain</span>:
          <span style="color:#606">cpu</span>:
            <span style="color:#606">sockets</span>:
              <span style="color:#F00;background-color:#FAA">VALUE # this is editable</span>
            <span style="color:#606">cores</span>:
              <span style="color:#F00;background-color:#FAA">VALUE # this is editable</span>
            <span style="color:#606">threads</span>:
              <span style="color:#F00;background-color:#FAA">VALUE # this is editable</span>
          <span style="color:#606">resources</span>:
            <span style="color:#606">requests</span>:
              <span style="color:#606">memory</span>:
                <span style="color:#F00;background-color:#FAA">VALUE # this is editable</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="relationship-between-templates-and-vms"><a class="anchor" href="#relationship-between-templates-and-vms"></a>Relationship between templates and VMs</h3>
<div class="paragraph">
<p>Once
<a href="https://docs.openshift.com/enterprise/3.0/dev_guide/templates.html#creating-from-templates-using-the-cli">processed</a>,
the templates produce VM objects to be used in the cluster. The VMs
produced from templates will have a <code>vm.kubevirt.io/template</code> label, whose
value will be the name of the parent template, for example
<code>fedora-desktop-medium</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">  <span style="color:#606">metadata</span>:
    <span style="color:#606">labels</span>:
      <span style="color:#606">vm.kubevirt.io/template</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">fedora-desktop-medium</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, these VMs can include an optional label <code>vm.kubevirt.io/template-namespace</code>,
whose value will be the namespace of the parent template, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">  <span style="color:#606">metadata</span>:
    <span style="color:#606">labels</span>:
      <span style="color:#606">vm.kubevirt.io/template-namespace</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">openshift</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If this label is not defined, the template is expected to belong to the same namespace as the VM.</p>
</div>
<div class="paragraph">
<p>This make it possible to query for all the VMs built from any template.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">oc process -o yaml rhel7-server-tiny PVCNAME=mydisk NAME=rheltinyvm</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiversion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">items</span>:
- <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">apiVersion: kubevirt.io/v1alpha3</span></span>
  <span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">VirtualMachine</span></span>
  <span style="color:#606">metadata</span>:
    <span style="color:#606">labels</span>:
      <span style="color:#606">vm.kubevirt.io/template</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">rhel7-server-tiny</span></span>
    <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">rheltinyvm</span></span>
    <span style="color:#606">osinfoname</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">rhel7.0</span></span>
  <span style="color:#606">spec</span>:
    <span style="color:#606">running</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">false</span></span>
    <span style="color:#606">template</span>:
      <span style="color:#606">spec</span>:
        <span style="color:#606">domain</span>:
          <span style="color:#606">cpu</span>:
            <span style="color:#606">sockets</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1</span></span>
            <span style="color:#606">cores</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1</span></span>
            <span style="color:#606">threads</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1</span></span>
          <span style="color:#606">devices</span>:
            <span style="color:#606">disks</span>:
            - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">disk:</span><span style="color:#D20">
                bus: virtio</span></span>
              <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">rootdisk</span></span>
            <span style="color:#606">rng</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
          <span style="color:#606">resources</span>:
            <span style="color:#606">requests</span>:
              <span style="color:#606">memory</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1G</span></span>
        <span style="color:#606">terminationGracePeriodSeconds</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">0</span></span>
        <span style="color:#606">volumes</span>:
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: rootdisk</span></span>
          <span style="color:#606">persistentVolumeClaim</span>:
            <span style="color:#606">claimName</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">mydisk</span></span>
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cloudInitNoCloud:</span><span style="color:#D20">
            userData: |-
              #cloud-config
              password: redhat
              chpasswd: { expire: False }</span></span>
          <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">cloudinitdisk</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">List</span></span>
<span style="color:#606">metadata</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can add add the VM from the template to the cluster in one go</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">oc process rhel7-server-tiny PVCNAME=mydisk NAME=rheltinyvm | oc apply -f -</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please note that, after the generation step, VM objects and template
objects have no relationship with each other besides the aforementioned
label (e.g. changes in templates do not automatically affect VMs, or
vice versa).</p>
</div>
</div>
<div class="sect2">
<h3 id="common-template-customization"><a class="anchor" href="#common-template-customization"></a>common template customization</h3>
<div class="paragraph">
<p>The templates provided by the kubevirt project provide a set of
conventions and annotations that augment the basic feature of the
<a href="https://docs.okd.io/latest/dev_guide/templates.html">openshift
templates</a>. You can customize your kubevirt-provided templates editing
these annotations, or you can add them to your existing templates to
make them consumable by the kubevirt services.</p>
</div>
<div class="paragraph">
<p>Here’s a description of the kubevirt annotations. Unless otherwise
specified, the following keys are meant to be top-level entries of the
template metadata, like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Template</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">windows-10</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">openshift.io/display-name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Generic demo template</span><span style="color:#710">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>All the following annotations are prefixed with
<code>defaults.template.kubevirt.io</code>, which is omitted below for brevity. So the
actual annotations you should use will look like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Template</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">windows-10</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">defaults.template.kubevirt.io/disk</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default-disk</span></span>
    <span style="color:#606">defaults.template.kubevirt.io/volume</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default-volume</span></span>
    <span style="color:#606">defaults.template.kubevirt.io/nic</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default-nic</span></span>
    <span style="color:#606">defaults.template.kubevirt.io/network</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">default-network</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Unless otherwise specified, all annotations are meant to be safe
defaults, both for performance and compability, and hints for the
CNV-aware UI and tooling.</p>
</div>
<div class="sect4">
<h5 id="disk"><a class="anchor" href="#disk"></a>disk</h5>
<div class="paragraph">
<p>See the section <code>references</code> below.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Template</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Linux</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">defaults.template.kubevirt.io/disk</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">rhel-disk</span></span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="nic"><a class="anchor" href="#nic"></a>nic</h5>
<div class="paragraph">
<p>See the section <code>references</code> below.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Template</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Windows</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">defaults.template.kubevirt.io/nic</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">my-nic</span></span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="volume"><a class="anchor" href="#volume"></a>volume</h5>
<div class="paragraph">
<p>See the section <code>references</code> below.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Template</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Linux</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">defaults.template.kubevirt.io/volume</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">custom-volume</span></span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="network"><a class="anchor" href="#network"></a>network</h5>
<div class="paragraph">
<p>See the section <code>references</code> below.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Template</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Linux</span></span>
  <span style="color:#606">annotations</span>:
    <span style="color:#606">defaults.template.kubevirt.io/network</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">fast-net</span></span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="references"><a class="anchor" href="#references"></a>references</h5>
<div class="paragraph">
<p>The default values for network, nic, volume, disk are meant to be the <strong>name</strong> of a section later in the document that the UI will find and consume to find the default values for the corresponding types.
For example, considering the annotation <code>defaults.template.kubevirt.io/disk: my-disk</code>: we assume that later in the document it exists an element called <code>my-disk</code> that the UI can use to find the data it needs.
The names actually don&#8217;t matter as long as they are legal for kubernetes and consistent with the content of the document.</p>
</div>
</div>
<div class="sect4">
<h5 id="complete-example"><a class="anchor" href="#complete-example"></a>complete example</h5>
<div class="listingblock yaml">
<div class="content">
<pre>apiversion: v1
items:
- apiversion: kubevirt.io/v1alpha3
  kind: virtualmachine
  metadata:
    labels:
      vm.kubevirt.io/template: rhel7-generic-tiny
    name: rheltinyvm
    osinfoname: rhel7.0
    defaults.template.kubevirt.io/disk: rhel-default-disk
    defaults.template.kubevirt.io/nic: rhel-default-net
  spec:
    running: false
    template:
      spec:
        domain:
          cpu:
            sockets: 1
            cores: 1
            threads: 1
          devices:
            rng: {}
          resources:
            requests:
              memory: 1g
        terminationgraceperiodseconds: 0
        volumes:
        - containerDisk:
          image: registry:5000/kubevirt/cirros-container-disk-demo:devel
          name: rhel-default-disk
        networks:
        - genie:
          networkName: flannel
          name: rhel-default-net
kind: list
metadata: {}


once processed becomes:
[demo-vm.yaml]
---
apiVersion: kubevirt.io/v1alpha3
kind: VirtualMachine
metadata:
  labels:
    vm.kubevirt.io/template: rhel7-generic-tiny
  name: rheltinyvm
  osinfoname: rhel7.0
spec:
  running: false
  template:
    spec:
      domain:
        cpu:
          sockets: 1
          cores: 1
          threads: 1
        resources:
          requests:
            memory: 1g
        devices:
          rng: {}
          disks:
          - disk:
            name: rhel-default-disk
        interfaces:
        - bridge: {}
          name: rhel-default-nic
      terminationgraceperiodseconds: 0
      volumes:
      - containerDisk:
          image: registry:5000/kubevirt/cirros-container-disk-demo:devel
        name: containerdisk
      networks:
      - genie:
          networkName: flannel
        name: rhel-default-nic</pre>
</div>
</div>
</div>
</div>
</div>
</div>
      </div>
    </div>
  </div>
   <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
   <!-- Latest compiled and minified JavaScript -->
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
   <script src="../../latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
   <script type="text/javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
      $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
        if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
          $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
        }
      });
      $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
      $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
        $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
      });
    });
    /*]]>*/
  </script>
</body>
</html>